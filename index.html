<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>For My Best Friend</title>

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<style>
:root{
    --gift:#5b8def;
    --ribbon:#dbeafe;
    --paper:#f8fafc;
}

/* RESET */
*{margin:0;padding:0;box-sizing:border-box;}

/* üì∏ PHOTO COLLAGE BACKGROUND */
.photo-collage{
    position:fixed;
    inset:0;
    display:grid;
    grid-template-columns:repeat(3,1fr);
    grid-template-rows:repeat(2,1fr);
    z-index:-2;
}
.photo-collage img{
    width:100%;
    height:100%;
    object-fit:cover;
    filter:blur(2px) brightness(0.5);
}
.photo-collage::after{
    content:'';
    position:absolute;
    inset:0;
    background:rgba(0,0,0,0.5);
}

/* Mobile collage */
@media(max-width:768px){
    .photo-collage{
        grid-template-columns:repeat(2,1fr);
        grid-template-rows:repeat(3,1fr);
    }
}

/* BODY */
body{
    min-height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
    font-family:Georgia,'Times New Roman',serif;
    overflow:hidden;
}

/* üéÅ REAL GIFT */
.gift-container{
    position:relative;
    width:220px;
    height:200px;
    cursor:pointer;
    z-index:5;
}

/* Gift box */
.gift-box{
    position:absolute;
    bottom:0;
    width:100%;
    height:150px;
    background:var(--gift);
    border-radius:12px;
}
.gift-box::before{
    content:'';
    position:absolute;
    width:36px;
    height:100%;
    background:var(--ribbon);
    left:50%;
    transform:translateX(-50%);
}
.gift-box::after{
    content:'';
    position:absolute;
    width:100%;
    height:36px;
    background:var(--ribbon);
    top:50%;
    transform:translateY(-50%);
}

/* Lid */
.lid{
    position:absolute;
    top:0;
    left:-10px;
    width:240px;
    height:50px;
    background:var(--gift);
    border-radius:10px;
    transition:1.1s cubic-bezier(.16,.84,.44,1);
    z-index:2;
}
.lid::before{
    content:'';
    position:absolute;
    width:36px;
    height:100%;
    background:var(--ribbon);
    left:50%;
    transform:translateX(-50%);
}
.open .lid{
    transform:translateY(-160px) rotate(12deg);
    opacity:0;
}

/* üìñ BOOK */
.book{
    position:absolute;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%) scale(0.95);
    opacity:0;
    width:360px;
    height:520px;
    background:var(--paper);
    border-radius:18px;
    box-shadow:0 30px 60px rgba(0,0,0,0.45);
    padding:28px;
    display:flex;
    flex-direction:column;
    justify-content:space-between;
    transition:1.2s ease;
}
.open .book{
    transform:translate(-50%,-200px) scale(1);
    opacity:1;
}

.page-text{
    white-space:pre-wrap;
    font-size:1.02rem;
    line-height:1.6;
    min-height:360px;
}

.next{
    text-align:right;
    font-size:0.9rem;
    color:#555;
    cursor:pointer;
}

/* Reply */
.reply{
    display:none;
    text-align:center;
}
.reply p{
    font-size:0.9rem;
    margin-bottom:6px;
}
.reply button{
    padding:8px 18px;
    border:none;
    border-radius:20px;
    background:#5b8def;
    color:white;
    cursor:pointer;
}

/* Countdown */
.countdown{
    position:fixed;
    top:20px;
    left:50%;
    transform:translateX(-50%);
    color:white;
    font-size:1rem;
    z-index:10;
    background:rgba(0,0,0,0.35);
    padding:6px 14px;
    border-radius:20px;
    backdrop-filter:blur(6px);
}

/* Mobile */
@media(max-width:480px){
    .book{
        width:300px;
        height:480px;
        padding:22px;
    }
}
</style>
</head>

<body>

<!-- BACKGROUND -->
<div class="photo-collage">
    <img src="pimg1.jpg"><img src="pimg5.jpg"><img src="pimg4.jpg">
    <img src="pimg2.jpg"><img src="img5.jpg"><img src="img6.jpg">
</div>

<!-- COUNTDOWN -->
<div class="countdown" id="countdown"></div>

<!-- üéÅ GIFT -->
<div class="gift-container" onclick="openGift()">
    <div class="lid"></div>
    <div class="gift-box"></div>

    <!-- üìñ BOOK -->
    <div class="book">
        <div class="page-text" id="text"></div>

        <div class="next" id="nextBtn" onclick="nextPage()">Tap to turn page ‚Üí</div>

        <div class="reply" id="replyBox">
            <p>Epdi irukku nu sollunga? ‚ù§Ô∏è</p>
            <button onclick="sendReply()">Reply</button>
        </div>
    </div>
</div>

<audio id="flipSound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_2c42c8c9c6.mp3"></audio>

<script>
/* ‚è∞ SET BIRTHDAY */
const birthdayTime = new Date(Date.now() + 60000);


/* üìñ LETTER PAGES (UNCHANGED) */
const pages = [
`From
Mr. Hari Prasanna,
My veedu,
To
Sports Captain,
Ramachandra College.

Respected Best Friend,`,

`Epdi start panrathu nu theriyala. Na 11th startingla lam neraya yosipen, yen bio-maths eduthom, cse eduthurukalam, namma frnds neraya peru anga han irukanga nu. Ana ippo than puriyuthu athu nallathu than nu. Appo namma pesunathu naala than ippo than ivlo close aanom.`,

`Oru sila time, nee paithiyam mathiri pesum pothu theriyathanama thappu panitomo nu lam thonum, ana athu vera department üòÇ`,

`Nee enakku neraya help panni iruka. Enakku neraya solli kuduthu irukka, studies la illa but en life la.`,

`Enakku eppo kastama irunthalum unkitta than pesuven, unakku velai irunthalum porumaiya kepa, athukulam na evlo thanks sonnalum pathathu....‚ù§Ô∏è`,

`Eppovum mathavangalukaga yosipa, athuve unakku oru sila time prechanayavum varum, irunthalum athula irunthu maramata. Athunalaye enakku unna romba pudikkum.`, 

`Avlo than, neraya pesiten unakku ithuve athigamüòÖ. Aprm last ah onne onnu irukku,`,

`Na unakku insta la April 18, 2024 ‚ÄúNeet apply panni irukkiya?‚Äù nu msg pannen nyabagam irukka, athu than na en life la panna oru best decision.`,

`Thank you for being my Best Friend!!



-Ippadikku,
Your honour.
Opened on: ${new Date().toDateString()}`
];

let page=0,char=0,typing=false;

/* TYPEWRITER */
function typeText(){
    typing=true;
    const el=document.getElementById("text");
    if(char<pages[page].length){
        el.textContent+=pages[page][char++];
        setTimeout(typeText,28);
    }else{
        typing=false;
        if(page===pages.length-1){
            document.getElementById("nextBtn").style.display="none";
            document.getElementById("replyBox").style.display="block";
        }
    }
}

/* NEXT PAGE */
function nextPage(){
    if(typing) return;
    if(page<pages.length-1){
        document.getElementById("flipSound").play();
        page++;
        char=0;
        document.getElementById("text").textContent="";
        typeText();
    }
}

/* OPEN GIFT */
function openGift(){
    if(new Date()<birthdayTime){
        alert("Wait till your birthday üéÇ");
        return;
    }
    const box=document.querySelector('.gift-container');
    if(!box.classList.contains('open')){
        box.classList.add('open');
        typeText();
        confetti({particleCount:60,spread:70,origin:{y:0.6}});
    }
}

/* REPLY */
function sendReply(){
    window.open("https://www.instagram.com/direct/t/17845401846187603/", "_blank");
}


/* COUNTDOWN */
setInterval(() => {
    const now = new Date();
    const diff = birthdayTime - now;

    const countdownEl = document.getElementById("countdown");

    if (diff > 0) {
        const days = Math.floor(diff / (1000 * 60 * 60 * 24));
        const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
        const minutes = Math.floor((diff / (1000 * 60)) % 60);
        const seconds = Math.floor((diff / 1000) % 60);

        countdownEl.innerText =
            `Opens in ${days}d : ${hours.toString().padStart(2,'0')}h : ` +
            `${minutes.toString().padStart(2,'0')}m : ${seconds.toString().padStart(2,'0')}s`;
    } else {
        countdownEl.innerText = "Happy Birthday Sports Captain....‚ù§Ô∏è‚ù§Ô∏è";
    }
}, 1000);

</script>

</body>
</html>
